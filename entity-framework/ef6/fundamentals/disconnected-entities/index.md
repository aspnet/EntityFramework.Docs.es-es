---
title: 'Trabajo con entidades desconectadas: EF6'
author: divega
ms.date: 10/23/2016
ms.assetid: 12138003-a373-4817-b1b7-724130202f5f
ms.openlocfilehash: f1ce44e7b00ec4c60a81ed850ce5c9d866495e1b
ms.sourcegitcommit: 9b562663679854c37c05fca13d93e180213fb4aa
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 04/07/2020
ms.locfileid: "78413370"
---
# <a name="working-with-disconnected-entities"></a><span data-ttu-id="15034-102">Trabajo con entidades desconectadas</span><span class="sxs-lookup"><span data-stu-id="15034-102">Working with disconnected entities</span></span>
<span data-ttu-id="15034-103">En una aplicación basada en Entity Framework, una clase de contexto es responsable de detectar los cambios aplicados a las entidades sometidas a seguimiento.</span><span class="sxs-lookup"><span data-stu-id="15034-103">In an Entity Framework-based application, a context class is responsible for detecting changes applied to tracked entities.</span></span> <span data-ttu-id="15034-104">Una llamada al método SaveChanges almacena los cambios que controla el contexto en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="15034-104">Calling the SaveChanges method persists the changes tracked by the context to the database.</span></span> <span data-ttu-id="15034-105">Cuando se trabaja con aplicaciones de n niveles, los objetos de entidad generalmente se modifican mientras están desconectados del contexto y es necesario decidir cómo realizar el seguimiento de los cambios y notificar esos cambios al contexto.</span><span class="sxs-lookup"><span data-stu-id="15034-105">When working with n-tier applications, entity objects are usually modified while disconnected from the context, and you must decide how to track changes and report those changes back to the context.</span></span> <span data-ttu-id="15034-106">En este tema se habla de las distintas opciones disponibles cuando se usa Entity Framework con entidades desconectadas.</span><span class="sxs-lookup"><span data-stu-id="15034-106">This topic discusses different options that are available when using Entity Framework with disconnected entities.</span></span>   

## <a name="web-service-frameworks"></a><span data-ttu-id="15034-107">Marcos de trabajo de servicio web</span><span class="sxs-lookup"><span data-stu-id="15034-107">Web service frameworks</span></span>

<span data-ttu-id="15034-108">Las tecnologías de servicios web suelen admitir modelos que pueden usarse para almacenar los cambios en objetos individuales desconectados.</span><span class="sxs-lookup"><span data-stu-id="15034-108">Web services technologies typically support patterns that can be used to persist changes on individual disconnected objects.</span></span> <span data-ttu-id="15034-109">Por ejemplo, ASP.NET Web API permite codificar acciones de controlador que pueden incluir llamadas a EF para almacenar los cambios realizados en un objeto en una base de datos.</span><span class="sxs-lookup"><span data-stu-id="15034-109">For example, ASP.NET Web API allows you to code controller actions that can include calls to EF to persist changes made to an object on a database.</span></span> <span data-ttu-id="15034-110">De hecho, las herramientas de Web API de Visual Studio facilitan la aplicación de scaffolding a un controlador de Web API desde el modelo de Entity Framework 6.</span><span class="sxs-lookup"><span data-stu-id="15034-110">In fact, the Web API tooling in Visual Studio makes it easy to scaffold a Web API controller from your Entity Framework 6 model.</span></span> <span data-ttu-id="15034-111">Para obtener más información, vea [Usar Web API con Entity Framework 6](https://docs.microsoft.com/aspnet/web-api/overview/data/using-web-api-with-entity-framework/).</span><span class="sxs-lookup"><span data-stu-id="15034-111">For more information, see [using Web API with Entity Framework 6](https://docs.microsoft.com/aspnet/web-api/overview/data/using-web-api-with-entity-framework/).</span></span>   

<span data-ttu-id="15034-112">Históricamente, ha habido otras tecnologías de servicios web que ofrecían integración con Entity Framework, como [WCF Data Services](https://docs.microsoft.com/dotnet/framework/data/wcf/create-a-data-service-using-an-adonet-ef-data-wcf) y [RIA Services](https://docs.microsoft.com/previous-versions/dotnet/wcf-ria/ee707344(v=vs.91)).</span><span class="sxs-lookup"><span data-stu-id="15034-112">Historically, there have been several other Web services technologies that offered integration with Entity Framework, like [WCF Data Services](https://docs.microsoft.com/dotnet/framework/data/wcf/create-a-data-service-using-an-adonet-ef-data-wcf) and [RIA Services](https://docs.microsoft.com/previous-versions/dotnet/wcf-ria/ee707344(v=vs.91)).</span></span>

## <a name="low-level-ef-apis"></a><span data-ttu-id="15034-113">API de EF de bajo nivel</span><span class="sxs-lookup"><span data-stu-id="15034-113">Low-level EF APIs</span></span>

<span data-ttu-id="15034-114">Si no quiere usar una solución de n niveles existente, o si quiere personalizar lo que ocurre dentro de una acción de controlador en los servicios de Web API, Entity Framework proporciona API que permiten aplicar los cambios realizados en un nivel desconectado.</span><span class="sxs-lookup"><span data-stu-id="15034-114">If you don't want to use an existing n-tier solution, or if you want to customize what happens inside a controller action in a Web API services, Entity Framework provides APIs that allow you to apply changes made on a disconnected tier.</span></span> <span data-ttu-id="15034-115">Para obtener más información, vea [Add, Attach, and entity state](~/ef6/saving/change-tracking/entity-state.md) (Agregar, adjuntar y estado de entidad).</span><span class="sxs-lookup"><span data-stu-id="15034-115">For more information, see [Add, Attach, and entity state](~/ef6/saving/change-tracking/entity-state.md).</span></span>  

## <a name="self-tracking-entities"></a><span data-ttu-id="15034-116">Entidades de seguimiento propio</span><span class="sxs-lookup"><span data-stu-id="15034-116">Self-Tracking Entities</span></span>  

<span data-ttu-id="15034-117">El seguimiento de los cambios en gráficos arbitrarios de entidades mientras se está desconectado del contexto de EF es un problema difícil.</span><span class="sxs-lookup"><span data-stu-id="15034-117">Tracking changes on arbitrary graphs of entities while disconnected from the EF context is a hard problem.</span></span> <span data-ttu-id="15034-118">Uno de los intentos de solucionar el problema fue la plantilla de generación de código Entidades de autoseguimiento.</span><span class="sxs-lookup"><span data-stu-id="15034-118">One of the attempts to solve it was the Self-Tracking Entities code generation template.</span></span> <span data-ttu-id="15034-119">Esta plantilla genera clases de entidad que contienen lógica para seguir los cambios realizados en un nivel desconectado como estado en las propias entidades.</span><span class="sxs-lookup"><span data-stu-id="15034-119">This template generates entity classes that contain logic to track changes made on a disconnected tier as state in the entities themselves.</span></span> <span data-ttu-id="15034-120">También se genera un conjunto de métodos de extensión para aplicar esos cambios a un contexto.</span><span class="sxs-lookup"><span data-stu-id="15034-120">A set of extension methods is also generated to apply those changes to a context.</span></span>

<span data-ttu-id="15034-121">Esta plantilla se puede usar con los modelos creados mediante EF Designer, pero no con modelos de Code First.</span><span class="sxs-lookup"><span data-stu-id="15034-121">This template can be used with models created using the EF Designer, but can not be used with Code First models.</span></span> <span data-ttu-id="15034-122">Para obtener más información, vea [Entidades de autoseguimiento](self-tracking-entities/index.md).</span><span class="sxs-lookup"><span data-stu-id="15034-122">For more information, see [Self-Tracking Entities](self-tracking-entities/index.md).</span></span>  

> [!IMPORTANT]
> <span data-ttu-id="15034-123">Ya no se recomienda usar la plantilla Entidades de autoseguimiento.</span><span class="sxs-lookup"><span data-stu-id="15034-123">We no longer recommend using the self-tracking-entities template.</span></span> <span data-ttu-id="15034-124">Solo sigue estando disponible para la compatibilidad con las aplicaciones existentes.</span><span class="sxs-lookup"><span data-stu-id="15034-124">It will only continue to be available to support existing applications.</span></span> <span data-ttu-id="15034-125">Si la aplicación necesita trabajar con gráficos desconectados de entidades, considere otras alternativas, como [Trackable Entities](https://trackableentities.github.io/), que es una tecnología similar a Entidades de autoseguimiento pero que la comunidad desarrolla de forma más activa, o escriba código personalizado mediante la API de seguimiento de cambios de bajo nivel.</span><span class="sxs-lookup"><span data-stu-id="15034-125">If your application requires working with disconnected graphs of entities, consider other alternatives such as [Trackable Entities](https://trackableentities.github.io/), which is a technology similar to Self-Tracking-Entities that is more actively developed by the community, or writing custom code using the low-level change tracking APIs.</span></span>
