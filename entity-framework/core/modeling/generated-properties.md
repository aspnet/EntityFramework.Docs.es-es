---
title: 'Valores generados: EF Core'
description: Cómo configurar la generación de valores para las propiedades al usar Entity Framework Core
author: AndriySvyryd
ms.author: ansvyryd
ms.date: 11/06/2019
uid: core/modeling/generated-properties
ms.openlocfilehash: 7fa3eae5e2edb7b4c40ed4f99ce4a29f367e622a
ms.sourcegitcommit: 7a709ce4f77134782393aa802df5ab2718714479
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 12/04/2019
ms.locfileid: "74824705"
---
# <a name="generated-values"></a><span data-ttu-id="39b15-103">Valores generados</span><span class="sxs-lookup"><span data-stu-id="39b15-103">Generated Values</span></span>

## <a name="value-generation-patterns"></a><span data-ttu-id="39b15-104">Patrones de generación de valores</span><span class="sxs-lookup"><span data-stu-id="39b15-104">Value Generation Patterns</span></span>

<span data-ttu-id="39b15-105">Hay tres patrones de generación de valores que se pueden usar para las propiedades:</span><span class="sxs-lookup"><span data-stu-id="39b15-105">There are three value generation patterns that can be used for properties:</span></span>

* <span data-ttu-id="39b15-106">Sin generación de valores</span><span class="sxs-lookup"><span data-stu-id="39b15-106">No value generation</span></span>
* <span data-ttu-id="39b15-107">Valor generado al agregar</span><span class="sxs-lookup"><span data-stu-id="39b15-107">Value generated on add</span></span>
* <span data-ttu-id="39b15-108">Valor generado al agregar o actualizar</span><span class="sxs-lookup"><span data-stu-id="39b15-108">Value generated on add or update</span></span>

### <a name="no-value-generation"></a><span data-ttu-id="39b15-109">Sin generación de valores</span><span class="sxs-lookup"><span data-stu-id="39b15-109">No value generation</span></span>

<span data-ttu-id="39b15-110">Ninguna generación de valores significa que siempre se proporcionará un valor válido que se va a guardar en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="39b15-110">No value generation means that you will always supply a valid value to be saved to the database.</span></span> <span data-ttu-id="39b15-111">Este valor válido se debe asignar a las nuevas entidades antes de que se agreguen al contexto.</span><span class="sxs-lookup"><span data-stu-id="39b15-111">This valid value must be assigned to new entities before they are added to the context.</span></span>

### <a name="value-generated-on-add"></a><span data-ttu-id="39b15-112">Valor generado al agregar</span><span class="sxs-lookup"><span data-stu-id="39b15-112">Value generated on add</span></span>

<span data-ttu-id="39b15-113">El valor generado al agregar significa que se genera un valor para las nuevas entidades.</span><span class="sxs-lookup"><span data-stu-id="39b15-113">Value generated on add means that a value is generated for new entities.</span></span>

<span data-ttu-id="39b15-114">Dependiendo del proveedor de base de datos que se use, es posible que se generen valores de cliente en EF o en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="39b15-114">Depending on the database provider being used, values may be generated client side by EF or in the database.</span></span> <span data-ttu-id="39b15-115">Si la base de datos genera el valor, EF puede asignar un valor temporal al agregar la entidad al contexto.</span><span class="sxs-lookup"><span data-stu-id="39b15-115">If the value is generated by the database, then EF may assign a temporary value when you add the entity to the context.</span></span> <span data-ttu-id="39b15-116">Este valor temporal se reemplazará por el valor generado por la base de datos durante la `SaveChanges()`.</span><span class="sxs-lookup"><span data-stu-id="39b15-116">This temporary value will then be replaced by the database generated value during `SaveChanges()`.</span></span>

<span data-ttu-id="39b15-117">Si agrega una entidad al contexto que tiene un valor asignado a la propiedad, EF intentará insertar ese valor en lugar de generar uno nuevo.</span><span class="sxs-lookup"><span data-stu-id="39b15-117">If you add an entity to the context that has a value assigned to the property, then EF will attempt to insert that value rather than generating a new one.</span></span> <span data-ttu-id="39b15-118">Se considera que una propiedad tiene un valor asignado si no se le asigna el valor predeterminado de CLR (`null` para `string`, `0` para `int`, `Guid.Empty` para `Guid`, etc.).</span><span class="sxs-lookup"><span data-stu-id="39b15-118">A property is considered to have a value assigned if it is not assigned the CLR default value (`null` for `string`, `0` for `int`, `Guid.Empty` for `Guid`, etc.).</span></span> <span data-ttu-id="39b15-119">Para obtener más información, vea [valores explícitos para las propiedades generadas](../saving/explicit-values-generated-properties.md).</span><span class="sxs-lookup"><span data-stu-id="39b15-119">For more information, see [Explicit values for generated properties](../saving/explicit-values-generated-properties.md).</span></span>

> [!WARNING]  
> <span data-ttu-id="39b15-120">La forma en que se genera el valor para las entidades agregadas dependerá del proveedor de base de datos que se use.</span><span class="sxs-lookup"><span data-stu-id="39b15-120">How the value is generated for added entities will depend on the database provider being used.</span></span> <span data-ttu-id="39b15-121">Los proveedores de bases de datos pueden configurar automáticamente la generación de valores para algunos tipos de propiedad, pero otros pueden requerir que se configure manualmente cómo se genera el valor.</span><span class="sxs-lookup"><span data-stu-id="39b15-121">Database providers may automatically setup value generation for some property types, but others may require you to manually setup how the value is generated.</span></span>
>
> <span data-ttu-id="39b15-122">Por ejemplo, al usar SQL Server, se generarán automáticamente valores para las propiedades de `GUID` (mediante el algoritmo GUID secuencial SQL Server).</span><span class="sxs-lookup"><span data-stu-id="39b15-122">For example, when using SQL Server, values will be automatically generated for `GUID` properties (using the SQL Server sequential GUID algorithm).</span></span> <span data-ttu-id="39b15-123">Sin embargo, si especifica que se genere una propiedad `DateTime` en Add, debe configurar una manera de que se generen los valores.</span><span class="sxs-lookup"><span data-stu-id="39b15-123">However, if you specify that a `DateTime` property is generated on add, then you must setup a way for the values to be generated.</span></span> <span data-ttu-id="39b15-124">Una manera de hacerlo es configurar un valor predeterminado de `GETDATE()`, vea [valores predeterminados](relational/default-values.md).</span><span class="sxs-lookup"><span data-stu-id="39b15-124">One way to do this, is to configure a default value of `GETDATE()`, see [Default Values](relational/default-values.md).</span></span>

### <a name="value-generated-on-add-or-update"></a><span data-ttu-id="39b15-125">Valor generado al agregar o actualizar</span><span class="sxs-lookup"><span data-stu-id="39b15-125">Value generated on add or update</span></span>

<span data-ttu-id="39b15-126">El valor generado al agregar o actualizar significa que se genera un nuevo valor cada vez que se guarda el registro (Insert o Update).</span><span class="sxs-lookup"><span data-stu-id="39b15-126">Value generated on add or update means that a new value is generated every time the record is saved (insert or update).</span></span>

<span data-ttu-id="39b15-127">Como `value generated on add`, si especifica un valor para la propiedad en una instancia recién agregada de una entidad, se insertará ese valor en lugar de un valor que se va a generar.</span><span class="sxs-lookup"><span data-stu-id="39b15-127">Like `value generated on add`, if you specify a value for the property on a newly added instance of an entity, that value will be inserted rather than a value being generated.</span></span> <span data-ttu-id="39b15-128">También es posible establecer un valor explícito al actualizar.</span><span class="sxs-lookup"><span data-stu-id="39b15-128">It is also possible to set an explicit value when updating.</span></span> <span data-ttu-id="39b15-129">Para obtener más información, vea [valores explícitos para las propiedades generadas](../saving/explicit-values-generated-properties.md).</span><span class="sxs-lookup"><span data-stu-id="39b15-129">For more information, see [Explicit values for generated properties](../saving/explicit-values-generated-properties.md).</span></span>

> [!WARNING]
> <span data-ttu-id="39b15-130">La forma en que se genera el valor para las entidades agregadas y actualizadas dependerá del proveedor de base de datos que se use.</span><span class="sxs-lookup"><span data-stu-id="39b15-130">How the value is generated for added and updated entities will depend on the database provider being used.</span></span> <span data-ttu-id="39b15-131">Los proveedores de bases de datos pueden configurar automáticamente la generación de valores para algunos tipos de propiedades, mientras que otros requerirán que se configure manualmente cómo se genera el valor.</span><span class="sxs-lookup"><span data-stu-id="39b15-131">Database providers may automatically setup value generation for some property types, while others will require you to manually setup how the value is generated.</span></span>
>
> <span data-ttu-id="39b15-132">Por ejemplo, al usar SQL Server, `byte[]` propiedades que se establecen como se generan al agregar o actualizar y marcadas como tokens de simultaneidad, se configurarán con el tipo de datos `rowversion`, de modo que los valores se generarán en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="39b15-132">For example, when using SQL Server, `byte[]` properties that are set as generated on add or update and marked as concurrency tokens, will be setup with the `rowversion` data type - so that values will be generated in the database.</span></span> <span data-ttu-id="39b15-133">Sin embargo, si especifica que se genere una propiedad `DateTime` en Add o Update, debe configurar una manera de que se generen los valores.</span><span class="sxs-lookup"><span data-stu-id="39b15-133">However, if you specify that a `DateTime` property is generated on add or update, then you must setup a way for the values to be generated.</span></span> <span data-ttu-id="39b15-134">Una forma de hacerlo consiste en configurar un valor predeterminado de `GETDATE()` (vea [valores predeterminados](relational/default-values.md)) para generar valores para las nuevas filas.</span><span class="sxs-lookup"><span data-stu-id="39b15-134">One way to do this, is to configure a default value of `GETDATE()` (see [Default Values](relational/default-values.md)) to generate values for new rows.</span></span> <span data-ttu-id="39b15-135">Después, puede usar un desencadenador de base de datos para generar valores durante las actualizaciones (como el siguiente desencadenador de ejemplo).</span><span class="sxs-lookup"><span data-stu-id="39b15-135">You could then use a database trigger to generate values during updates (such as the following example trigger).</span></span>
>
> [!code-sql[Main](../../../samples/core/Modeling/FluentAPI/ValueGeneratedOnAddOrUpdate.sql)]

## <a name="conventions"></a><span data-ttu-id="39b15-136">Convenciones</span><span class="sxs-lookup"><span data-stu-id="39b15-136">Conventions</span></span>

<span data-ttu-id="39b15-137">De forma predeterminada, las claves principales no compuestas de tipo Short, int, Long o GUID se configurarán para que se generen los valores en Add.</span><span class="sxs-lookup"><span data-stu-id="39b15-137">By default, non-composite primary keys of type short, int, long, or Guid will be setup to have values generated on add.</span></span> <span data-ttu-id="39b15-138">El resto de las propiedades se configurarán sin generación de valores.</span><span class="sxs-lookup"><span data-stu-id="39b15-138">All other properties will be setup with no value generation.</span></span>

## <a name="data-annotations"></a><span data-ttu-id="39b15-139">Anotaciones de datos</span><span class="sxs-lookup"><span data-stu-id="39b15-139">Data Annotations</span></span>

### <a name="no-value-generation-data-annotations"></a><span data-ttu-id="39b15-140">Sin generación de valores (anotaciones de datos)</span><span class="sxs-lookup"><span data-stu-id="39b15-140">No value generation (Data Annotations)</span></span>

[!code-csharp[Main](../../../samples/core/Modeling/DataAnnotations/ValueGeneratedNever.cs#Sample)]

### <a name="value-generated-on-add-data-annotations"></a><span data-ttu-id="39b15-141">Valor generado en Add (anotaciones de datos)</span><span class="sxs-lookup"><span data-stu-id="39b15-141">Value generated on add (Data Annotations)</span></span>

[!code-csharp[Main](../../../samples/core/Modeling/DataAnnotations/ValueGeneratedOnAdd.cs#Sample)]

> [!WARNING]  
> <span data-ttu-id="39b15-142">Esto solo permite que EF sepa que los valores se generan para las entidades agregadas, no garantiza que EF configurará el mecanismo real para generar valores.</span><span class="sxs-lookup"><span data-stu-id="39b15-142">This just lets EF know that values are generated for added entities, it does not guarantee that EF will setup the actual mechanism to generate values.</span></span> <span data-ttu-id="39b15-143">Vea la sección [valor generado al agregar](#value-generated-on-add) para obtener más detalles.</span><span class="sxs-lookup"><span data-stu-id="39b15-143">See [Value generated on add](#value-generated-on-add) section for more details.</span></span>

### <a name="value-generated-on-add-or-update-data-annotations"></a><span data-ttu-id="39b15-144">Valor generado al agregar o actualizar (anotaciones de datos)</span><span class="sxs-lookup"><span data-stu-id="39b15-144">Value generated on add or update (Data Annotations)</span></span>

[!code-csharp[Main](../../../samples/core/Modeling/DataAnnotations/ValueGeneratedOnAddOrUpdate.cs#Sample)]

> [!WARNING]  
> <span data-ttu-id="39b15-145">Esto solo permite que EF sepa que se generan valores para entidades agregadas o actualizadas, no garantiza que EF configure el mecanismo real para generar valores.</span><span class="sxs-lookup"><span data-stu-id="39b15-145">This just lets EF know that values are generated for added or updated entities, it does not guarantee that EF will setup the actual mechanism to generate values.</span></span> <span data-ttu-id="39b15-146">Vea la sección [valor generado al agregar o actualizar](#value-generated-on-add-or-update) para obtener más detalles.</span><span class="sxs-lookup"><span data-stu-id="39b15-146">See [Value generated on add or update](#value-generated-on-add-or-update) section for more details.</span></span>

## <a name="fluent-api"></a><span data-ttu-id="39b15-147">API fluida</span><span class="sxs-lookup"><span data-stu-id="39b15-147">Fluent API</span></span>

<span data-ttu-id="39b15-148">Puede usar la API fluida para cambiar el patrón de generación de valores para una propiedad determinada.</span><span class="sxs-lookup"><span data-stu-id="39b15-148">You can use the Fluent API to change the value generation pattern for a given property.</span></span>

### <a name="no-value-generation-fluent-api"></a><span data-ttu-id="39b15-149">Sin generación de valores (API fluida)</span><span class="sxs-lookup"><span data-stu-id="39b15-149">No value generation (Fluent API)</span></span>

[!code-csharp[Main](../../../samples/core/Modeling/FluentAPI/ValueGeneratedNever.cs#Sample)]

### <a name="value-generated-on-add-fluent-api"></a><span data-ttu-id="39b15-150">Valor generado en Add (API fluida)</span><span class="sxs-lookup"><span data-stu-id="39b15-150">Value generated on add (Fluent API)</span></span>

[!code-csharp[Main](../../../samples/core/Modeling/FluentAPI/ValueGeneratedOnAdd.cs#Sample)]

> [!WARNING]  
> <span data-ttu-id="39b15-151">`ValueGeneratedOnAdd()` simplemente permite que EF sepa que se generan valores para las entidades agregadas, no garantiza que EF configurará el mecanismo real para generar valores.</span><span class="sxs-lookup"><span data-stu-id="39b15-151">`ValueGeneratedOnAdd()` just lets EF know that values are generated for added entities, it does not guarantee that EF will setup the actual mechanism to generate values.</span></span>  <span data-ttu-id="39b15-152">Vea la sección [valor generado al agregar](#value-generated-on-add) para obtener más detalles.</span><span class="sxs-lookup"><span data-stu-id="39b15-152">See [Value generated on add](#value-generated-on-add) section for more details.</span></span>

### <a name="value-generated-on-add-or-update-fluent-api"></a><span data-ttu-id="39b15-153">Valor generado al agregar o actualizar (API fluida)</span><span class="sxs-lookup"><span data-stu-id="39b15-153">Value generated on add or update (Fluent API)</span></span>

[!code-csharp[Main](../../../samples/core/Modeling/FluentAPI/ValueGeneratedOnAddOrUpdate.cs#Sample)]

> [!WARNING]  
> <span data-ttu-id="39b15-154">Esto solo permite que EF sepa que se generan valores para entidades agregadas o actualizadas, no garantiza que EF configure el mecanismo real para generar valores.</span><span class="sxs-lookup"><span data-stu-id="39b15-154">This just lets EF know that values are generated for added or updated entities, it does not guarantee that EF will setup the actual mechanism to generate values.</span></span> <span data-ttu-id="39b15-155">Vea la sección [valor generado al agregar o actualizar](#value-generated-on-add-or-update) para obtener más detalles.</span><span class="sxs-lookup"><span data-stu-id="39b15-155">See [Value generated on add or update](#value-generated-on-add-or-update) section for more details.</span></span>
